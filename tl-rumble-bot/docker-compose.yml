# TL Rumble Bot - Déploiement NAS / serveur
# Usage : placer .env à côté de ce fichier, puis :
#   docker compose up -d

services:
  tl-rumble-bot:
    build: .
    container_name: tl-rumble-bot
    restart: unless-stopped
    env_file: .env
    environment:
      # DATABASE_PATH est forcé par l'entrypoint à /app/data (volume app-data) pour éviter erreurs sur NAS
      - NODE_ENV=production
    volumes:
      # Base SQLite : volume Docker (évite "unable to open database file" sur NAS)
      - app-data:/app/data
    # Optionnel : limiter les ressources sur un NAS
    # deploy:
    #   resources:
    #     limits:
    #       memory: 256M

volumes:
  app-data:
